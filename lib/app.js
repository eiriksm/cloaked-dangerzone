// Generated by CoffeeScript 1.7.1
(function() {
  var app, compress, express, index, server, util;

  express = require('express');

  compress = require('compression');

  app = express();

  module.exports = app;

  app.cache = {};

  util = require('util');

  index = require('./routes/index');

  server = {};

  app.init = function(ip, port) {
    if (ip == null) {
      ip = '127.0.0.1';
    }
    if (port == null) {
      port = 8080;
    }
    console.log(util.format('App started. Listening on %d', port));
    app.opts = {
      ip: ip,
      port: port
    };
    return server = app.listen(port, ip);
  };

  app.close = function() {
    console.log('Closing server with the following options:', app.opts);
    return server.close();
  };

  app.use(compress());

  app.use(express["static"](__dirname + '/../static/dartangular/web'));

  app.use(express["static"](__dirname + '/../static/dartangular/build/web'));

  app.get('/api/userstatus/:user', index.user);

  app.get('/api/user', index.allusers);

  app.get('/', index.index);

}).call(this);
